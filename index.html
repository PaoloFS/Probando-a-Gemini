<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>IA ORACLE v4.0 | AGENTE AGNOSTICO</title>
    <style>
        :root { --neon: #00ff41; --bg: #000a00; --panel: rgba(0, 20, 0, 0.95); }
        body { background: var(--bg); color: var(--neon); font-family: 'Segoe UI', 'Courier New', monospace; margin: 0; overflow: hidden; display: flex; height: 100vh; }
        
        #sidebar { width: 300px; border-right: 1px solid var(--neon); padding: 20px; background: var(--panel); display: flex; flex-direction: column; gap: 20px; box-shadow: 10px 0 30px rgba(0,255,0,0.1); }
        #main { flex: 1; display: flex; flex-direction: column; position: relative; }
        
        #terminal { flex: 1; padding: 30px; overflow-y: auto; scroll-behavior: smooth; font-size: 14px; line-height: 1.6; }
        #input-container { background: #000; border-top: 1px solid var(--neon); padding: 20px; display: flex; align-items: center; }
        
        input { background: transparent; border: none; color: var(--neon); font-size: 18px; flex: 1; outline: none; margin-left: 10px; }
        .log-entry { margin-bottom: 15px; border-left: 2px solid #004400; padding-left: 15px; animation: fadeIn 0.3s ease; }
        .ai-thought { color: #008800; font-style: italic; font-size: 12px; }
        .ai-answer { color: #ffffff; background: rgba(0,255,0,0.05); padding: 15px; border-radius: 4px; border: 1px solid rgba(0,255,0,0.2); margin-top: 5px; box-shadow: 0 0 15px rgba(0,255,0,0.05); }
        
        .loading { display: inline-block; animation: rotate 1s linear infinite; }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        .badge { background: var(--neon); color: #000; padding: 2px 6px; font-size: 10px; font-weight: bold; border-radius: 3px; margin-right: 10px; }
    </style>
</head>
<body>

<div id="sidebar">
    <h2 style="margin:0; font-size: 18px; letter-spacing: 2px;">ORACLE v4.0</h2>
    <div style="font-size: 10px; color: #008800;">ESTADO DEL NÚCLEO: <span id="cpu-load">OPTIMAL</span></div>
    <hr style="border: 0; border-top: 1px solid #141; width: 100%;">
    <div class="stat-group">
        <label style="font-size: 10px; display: block;">ENTORNO:</label>
        <span id="env-type" style="color: #fff; font-size: 12px;">Detectando...</span>
    </div>
    <div style="flex: 1;"></div>
    <div style="font-size: 10px; color: #333;">DESARROLLADO POR GEMINI AI<br>PROYECTO: ELITE AGENT</div>
</div>

<div id="main">
    <div id="terminal">
        <div class="log-entry">
            <span class="badge">SISTEMA</span>
            <span>Protocolo de búsqueda robusta inicializado. Esperando consulta semántica...</span>
        </div>
    </div>
    
    <div id="input-container">
        <span style="color: var(--neon)">AGENTE_ID_00 ></span>
        <input type="text" id="queryInput" placeholder="¿Qué deseas que investigue hoy?" autofocus>
    </div>
</div>

<script>
    const term = document.getElementById('terminal');
    const input = document.getElementById('queryInput');
    const envDisplay = document.getElementById('env-type');

    // Detectar si estamos en GitHub o local
    envDisplay.innerText = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' 
        ? 'ENTORNO DE DESARROLLO (LOCAL)' 
        : window.location.hostname.includes('github') ? 'SERVIDOR REMOTO (GITHUB)' : 'SISTEMA DE ARCHIVOS (LIMITADO)';

    async function processQuery(q) {
        createEntry('SISTEMA', `Analizando intención: "${q}"...`);
        const thought = createEntry('IA_THOUGHT', 'Consultando grafos de conocimiento global...', 'ai-thought');
        
        try {
            // Buscamos primero en Wikipedia para obtener el término exacto
            const searchRes = await fetch(`https://es.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(q)}&format=json&origin=*`);
            const searchData = await searchRes.json();
            
            if (searchData.query.search.length === 0) throw new Error('No se encontraron coincidencias.');

            const bestMatch = searchData.query.search[0].title;
            thought.innerText = `Sincronizando con la entrada: ${bestMatch}...`;

            // Obtenemos el resumen detallado
            const pageRes = await fetch(`https://es.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(bestMatch)}`);
            const pageData = await pageRes.json();

            createEntry('IA_ORACLE', pageData.extract, 'ai-answer');
        } catch (err) {
            createEntry('ERROR', 'La red ha rechazado la conexión o el término es demasiado ambiguo. Intenta con un nombre propio o evento histórico.', 'error');
        }
    }

    function createEntry(tag, text, className = '') {
        const div = document.createElement('div');
        div.className = 'log-entry ' + className;
        div.innerHTML = `<span class="badge">${tag}</span> <span>${text}</span>`;
        term.appendChild(div);
        term.scrollTop = term.scrollHeight;
        return div;
    }

    input.addEventListener('keypress', async (e) => {
        if (e.key === 'Enter' && input.value.trim() !== '') {
            const val = input.value;
            input.value = '';
            await processQuery(val);
        }
    });
</script>
</body>
</html>
